# Результаты тестирования команд

Author: Vasiliy Zdanovskiy  
email: vasilyvz@gmail.com

## Дата тестирования: 2025-12-26

## Тестовые данные
- Источник: `test_data/bhlff`
- Тестовая копия: `test_data/test_commands_<timestamp>`

---

## ГРУППА 1: REFACTOR

### 1.1 list_cst_blocks
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 1.2 query_cst
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 1.3 compose_cst_module - Replace
- **Статус**: ❌ Команда не найдена
- **Время**: -
- **Результат**: Command 'compose_cst_module' not found in server
- **Ошибки**: Команда не зарегистрирована

### 1.4 compose_cst_module - Insert
- **Статус**: ❌ Команда не найдена
- **Время**: -
- **Результат**: Command 'compose_cst_module' not found in server
- **Ошибки**: Команда не зарегистрирована

### 1.5 compose_cst_module - Create
- **Статус**: ❌ Команда не найдена
- **Время**: -
- **Результат**: Command 'compose_cst_module' not found in server
- **Ошибки**: Команда не зарегистрирована

### 1.6 split_class
- **Статус**: ⚠️ Частично (MCP)
- **Время**: ~0.5s
- **Результат**: Команда выполнилась, но ошибка БД (No module named 'code_analysis.commands.analyze_project_command')
- **Ошибки**: Требуется analyze_project_command для работы с БД

### 1.7 extract_superclass
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 1.8 split_file_to_package
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

---

## ГРУППА 2: ANALYSIS

### 2.1 update_indexes
- **Статус**: ❌ Команда не найдена (MCP)
- **Время**: -
- **Результат**: Command 'update_indexes' not found in server
- **Ошибки**: Команда не зарегистрирована

### 2.2 list_long_files
- **Статус**: ⚠️ Частично (MCP)
- **Время**: ~0.5s
- **Результат**: Команда выполнилась, но ошибка БД (No module named 'code_analysis.commands.analyze_project_command')
- **Ошибки**: Требуется analyze_project_command для работы с БД

### 2.3 list_errors_by_category
- **Статус**: ⚠️ Частично (MCP)
- **Время**: ~0.5s
- **Результат**: Команда выполнилась, но ошибка БД (No module named 'code_analysis.commands.analyze_project_command')
- **Ошибки**: Требуется analyze_project_command для работы с БД

### 2.4 get_code_entity_info
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.5 list_code_entities
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.6 get_ast
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.7 search_ast_nodes
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.8 ast_statistics
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.9 list_project_files
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.10 get_imports
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.11 find_dependencies
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.12 get_class_hierarchy
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.13 find_usages
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.14 export_graph
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 2.15 analyze_project
- **Статус**: ❌ Команда не найдена (MCP)
- **Время**: -
- **Результат**: Command 'analyze_project' not found in server
- **Ошибки**: Команда не зарегистрирована

### 2.16 analyze_file
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

---

## ГРУППА 3: SEARCH

### 3.1 fulltext_search
- **Статус**: ⚠️ Частично (MCP)
- **Время**: ~0.5s
- **Результат**: Команда выполнилась, но ошибка БД (No module named 'code_analysis.commands.analyze_project_command')
- **Ошибки**: Требуется analyze_project_command для работы с БД

### 3.2 list_class_methods
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 3.3 find_classes
- **Статус**: ⚠️ Частично (MCP)
- **Время**: ~0.5s
- **Результат**: Команда выполнилась, но ошибка БД (No module named 'code_analysis.commands.analyze_project_command')
- **Ошибки**: Требуется analyze_project_command для работы с БД

### 3.4 semantic_search
- **Статус**: ❌ Команда не найдена (MCP)
- **Время**: -
- **Результат**: Command 'semantic_search' not found in server
- **Ошибки**: Команда не зарегистрирована

---

## ГРУППА 4: CODE_QUALITY

### 4.1 format_code
- **Статус**: ✅ Успешно
- **Время**: ~0.5s
- **Результат**: Code formatted successfully
- **Ошибки**: -

### 4.2 lint_code
- **Статус**: ✅ Успешно
- **Время**: ~0.5s
- **Результат**: 0 errors found
- **Ошибки**: -

### 4.3 type_check_code
- **Статус**: ✅ Успешно (MCP)
- **Время**: ~2s
- **Результат**: Найдено 7 ошибок mypy (import-not-found для cupy, type errors)
- **Ошибки**: Ошибки в тестовом коде (ожидаемо)

---

## ГРУППА 5: FILE_MANAGEMENT

### 5.1 cleanup_deleted_files
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 5.2 unmark_deleted_file
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 5.3 collapse_versions
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 5.4 repair_database
- **Статус**: ✅ Успешно (MCP)
- **Время**: ~1s
- **Результат**: dry_run выполнен успешно, 0 файлов восстановлено (база пустая)
- **Ошибки**: -

---

## ГРУППА 6: BACKUP

### 6.1 list_backup_files
- **Статус**: ✅ Успешно
- **Время**: ~0.3s
- **Результат**: 0 backup files (база еще не создана)
- **Ошибки**: -

### 6.2 list_backup_versions
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 6.3 restore_backup_file
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 6.4 delete_backup
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 6.5 clear_all_backups
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

---

## ГРУППА 7: LOGGING

### 7.1 view_worker_logs
- **Статус**: ✅ Успешно (MCP)
- **Время**: ~0.5s
- **Результат**: Получено 10 последних записей из лога file_watcher
- **Ошибки**: -

### 7.2 list_worker_logs
- **Статус**: ✅ Успешно
- **Время**: ~0.3s
- **Результат**: Found 7 log files (file_watcher, vectorization)
- **Ошибки**: -

---

## ГРУППА 8: MONITORING

### 8.1 get_worker_status
- **Статус**: ✅ Успешно
- **Время**: ~0.3s
- **Результат**: file_watcher не запущен (0 процессов)
- **Ошибки**: -

### 8.2 get_database_status
- **Статус**: ✅ Успешно
- **Время**: ~0.3s
- **Результат**: Database file not found (база еще не создана)
- **Ошибки**: -

---

## ГРУППА 9: REPAIR_WORKER

### 9.1 start_repair_worker
- **Статус**: ✅ Успешно (MCP)
- **Время**: ~1s
- **Результат**: Repair worker запущен (PID: 970159)
- **Ошибки**: -

### 9.2 stop_repair_worker
- **Статус**: ✅ Успешно (MCP)
- **Время**: ~0.3s
- **Результат**: Worker не найден (уже остановлен или не запущен)
- **Ошибки**: -

### 9.3 repair_worker_status
- **Статус**: ✅ Успешно
- **Время**: ~0.3s
- **Результат**: repair worker не запущен (0 процессов)
- **Ошибки**: -

---

## ГРУППА 10: VECTORIZATION

### 10.1 rebuild_faiss
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 10.2 revectorize
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 10.3 check_vectors
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

---

## ГРУППА 11: OTHER

### 11.1 help
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

### 11.2 health
- **Статус**: ⏳ Ожидает выполнения
- **Время**: -
- **Результат**: -
- **Ошибки**: -

---

## Итоговая статистика

- **Всего команд**: 50
- **Протестировано (MCP)**: 18
- **Успешно**: 10
- **Частично (ошибки БД)**: 6
- **Не найдено**: 4 (list_cst_blocks, compose_cst_module, analyze_project, update_indexes, semantic_search)
- **Пропущено**: 32

